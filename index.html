<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Declara√ß√£o ISSQN - Profissional Aut√¥nomo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 20px;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 24px;
            margin-bottom: 10px;
        }

        .header h2 {
            color: #667eea;
            font-size: 18px;
            font-weight: normal;
            margin-bottom: 5px;
        }

        .header p {
            color: #7f8c8d;
            font-size: 14px;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .form-section h3 {
            background: #667eea;
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-size: 16px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-row-3 {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group.full {
            grid-column: 1 / -1;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #2c3e50;
            font-weight: bold;
            font-size: 14px;
        }

        label.required::after {
            content: " *";
            color: #e74c3c;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #dfe6e9;
            border-radius: 5px;
            font-size: 14px;
            transition: all 0.3s;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        input[type="date"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #dfe6e9;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .radio-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .radio-option input[type="radio"] {
            margin-right: 15px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .radio-option.selected {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .radio-label {
            flex: 1;
        }

        .radio-label strong {
            display: block;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .radio-label span {
            color: #7f8c8d;
            font-size: 13px;
        }

        .table-container {
            overflow-x: auto;
            margin: 20px 0;
            border: 1px solid #dfe6e9;
            border-radius: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }

        table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }

        table td {
            padding: 12px;
            border-bottom: 1px solid #dfe6e9;
        }

        table tr:last-child td {
            border-bottom: none;
        }

        table tr:hover {
            background: #f8f9ff;
        }

        .checkbox-group {
            margin: 15px 0;
        }

        .checkbox-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 15px;
            border: 2px solid #dfe6e9;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .checkbox-item:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 15px;
            margin-top: 3px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            font-weight: normal;
        }

        .alert {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .alert-info {
            background: #e8f4f8;
            border-left: 4px solid #3498db;
            color: #2c3e50;
        }

        .alert-warning {
            background: #fef5e7;
            border-left: 4px solid #f39c12;
            color: #2c3e50;
        }

        .btn-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        /* Estilos para o PDF */
        #pdfContent {
            position: absolute;
            left: -9999px;
            top: 0;
            width: 210mm;
            background: white;
        }

        .pdf-document {
            font-family: Arial, sans-serif;
            font-size: 11pt;
            line-height: 1.5;
            color: #000;
            padding: 40px;
        }

        .pdf-document h1 {
            text-align: center;
            font-size: 14pt;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .pdf-document h2 {
            text-align: center;
            font-size: 12pt;
            margin-bottom: 20px;
            font-weight: normal;
        }

        .pdf-document hr {
            border: none;
            border-top: 2px solid #000;
            margin: 15px 0;
        }

        .pdf-document h3 {
            font-size: 11pt;
            font-weight: bold;
            margin: 15px 0 10px 0;
            text-transform: uppercase;
        }

        .pdf-document p {
            margin: 8px 0;
            text-align: justify;
        }

        .pdf-document .field-line {
            margin: 5px 0;
        }

        .pdf-document .checkbox-line {
            margin: 5px 0;
        }

        .pdf-document table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 9pt;
        }

        .pdf-document table th {
            background: #e0e0e0;
            border: 1px solid #000;
            padding: 8px;
            font-weight: bold;
            text-align: center;
        }

        .pdf-document table td {
            border: 1px solid #000;
            padding: 8px;
        }

        .pdf-document .signature-area {
            margin-top: 40px;
            text-align: center;
        }

        .pdf-document .signature-line {
            border-top: 1px solid #000;
            width: 400px;
            margin: 50px auto 5px auto;
        }

        @media print {
            body {
                background: white;
            }
            .container {
                box-shadow: none;
                padding: 20px;
            }
            .btn-container {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            .form-row,
            .form-row-3 {
                grid-template-columns: 1fr;
            }
            .btn-container {
                flex-direction: column;
            }
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>SECRETARIA MUNICIPAL DE ECONOMIA - SEMEC</h1>
            <h2>SECRETARIA EXECUTIVA DA RECEITA MUNICIPAL - SERM</h2>
            <p>Prefeitura Municipal de Porto Velho - RO</p>
        </div>

        <div class="alert alert-info">
            <strong>üìã Instru√ß√µes:</strong> Preencha todos os campos obrigat√≥rios (*) com aten√ß√£o. Ao final, voc√™ poder√° gerar um PDF da declara√ß√£o para salvar e/ou imprimir.
        </div>

        <form id="declaracaoForm">
            <!-- SE√á√ÉO 1: IDENTIFICA√á√ÉO -->
            <div class="form-section">
                <h3>I - IDENTIFICA√á√ÉO DO DECLARANTE</h3>
                
                <div class="form-group">
                    <label for="nome" class="required">Nome Completo</label>
                    <input type="text" id="nome" name="nome" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="cpf" class="required">CPF</label>
                        <input type="text" id="cpf" name="cpf" placeholder="000.000.000-00" required>
                    </div>
                    <div class="form-group">
                        <label for="rg" class="required">RG</label>
                        <input type="text" id="rg" name="rg" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="dataNascimento" class="required">Data de Nascimento</label>
                        <input type="date" id="dataNascimento" name="dataNascimento" required>
                    </div>
                    <div class="form-group">
                        <label for="telefone" class="required">Telefone</label>
                        <input type="tel" id="telefone" name="telefone" placeholder="(69) 99999-9999" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="email" class="required">E-mail</label>
                    <input type="email" id="email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="endereco" class="required">Endere√ßo Completo</label>
                    <input type="text" id="endereco" name="endereco" placeholder="Rua, Avenida, n√∫mero, complemento" required>
                </div>

                <div class="form-row-3">
                    <div class="form-group">
                        <label for="bairro" class="required">Bairro</label>
                        <input type="text" id="bairro" name="bairro" required>
                    </div>
                    <div class="form-group">
                        <label for="cep" class="required">CEP</label>
                        <input type="text" id="cep" name="cep" placeholder="00000-000" required>
                    </div>
                    <div class="form-group">
                        <label for="cidade">Cidade/UF</label>
                        <input type="text" id="cidade" name="cidade" value="Porto Velho/RO" readonly>
                    </div>
                </div>

                <div class="form-group">
                    <label for="profissao" class="required">Profiss√£o/Atividade Exercida</label>
                    <input type="text" id="profissao" name="profissao" placeholder="Ex: Advogado, Contador, Eletricista, etc." required>
                </div>

                <div class="form-group">
                    <label for="localPrestacao" class="required">Local de Presta√ß√£o dos Servi√ßos</label>
                    <textarea id="localPrestacao" name="localPrestacao" placeholder="Informe o endere√ßo completo onde presta os servi√ßos" required></textarea>
                </div>
            </div>

            <!-- SE√á√ÉO 2: ENQUADRAMENTO -->
            <div class="form-section">
                <h3>II - ENQUADRAMENTO NA TABELA DE APURA√á√ÉO DO ISSQN</h3>

                <div class="alert alert-warning">
                    <strong>‚ö†Ô∏è Aten√ß√£o:</strong> Selecione o n√≠vel de escolaridade correspondente √† sua forma√ß√£o profissional. Esta informa√ß√£o determinar√° o valor mensal do ISSQN a ser recolhido.
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th>N√≠vel de Escolaridade</th>
                                <th>Al√≠quota "Ad Rem"</th>
                                <th>Periodicidade</th>
                                <th>Valor do Imposto</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>N√≠vel fundamental ou nenhuma escolaridade</td>
                                <td>1 UPF por profissional</td>
                                <td>Mensal</td>
                                <td>1 UPF</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>N√≠vel m√©dio</td>
                                <td>1,5 UPF por profissional</td>
                                <td>Mensal</td>
                                <td>1,5 UPF</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>N√≠vel superior</td>
                                <td>2 UPF por profissional</td>
                                <td>Mensal</td>
                                <td>2 UPF</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="form-group">
                    <label class="required">Selecione seu enquadramento:</label>
                    <div class="radio-group">
                        <div class="radio-option" onclick="selectRadio(1)">
                            <input type="radio" id="nivel1" name="nivel" value="1" required>
                            <div class="radio-label">
                                <strong>Item 1 - N√≠vel Fundamental ou Nenhuma Escolaridade</strong>
                                <span>Imposto mensal: 1 UPF</span>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectRadio(2)">
                            <input type="radio" id="nivel2" name="nivel" value="2">
                            <div class="radio-label">
                                <strong>Item 2 - N√≠vel M√©dio</strong>
                                <span>Imposto mensal: 1,5 UPF</span>
                            </div>
                        </div>
                        <div class="radio-option" onclick="selectRadio(3)">
                            <input type="radio" id="nivel3" name="nivel" value="3">
                            <div class="radio-label">
                                <strong>Item 3 - N√≠vel Superior</strong>
                                <span>Imposto mensal: 2 UPF</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="valorUPF">Valor Atual da UPF (R$)</label>
                    <input type="text" id="valorUPF" name="valorUPF" value="103,67" readonly style="background-color: #f0f0f0; cursor: not-allowed;">
                    <small style="color: #7f8c8d; display: block; margin-top: 5px;">Valor vigente da Unidade Padr√£o Fiscal do Munic√≠pio de Porto Velho/RO</small>
                </div>
            </div>

            <!-- SE√á√ÉO 3: RECONHECIMENTOS E CONCORD√ÇNCIAS -->
            <div class="form-section">
                <h3>III - RECONHECIMENTO DA OBRIGA√á√ÉO TRIBUT√ÅRIA</h3>

                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="check1" name="check1" required>
                        <label for="check1">
                            <strong>1.</strong> RECONHE√áO que, em raz√£o do exerc√≠cio de atividade profissional aut√¥noma no Munic√≠pio de Porto Velho/RO, sou contribuinte do Imposto Sobre Servi√ßos de Qualquer Natureza - ISSQN, nos termos da legisla√ß√£o tribut√°ria vigente.
                        </label>
                    </div>

                    <div class="checkbox-item">
                        <input type="checkbox" id="check2" name="check2" required>
                        <label for="check2">
                            <strong>2.</strong> DECLARO ter plena ci√™ncia de que o ISSQN ser√° lan√ßado mensalmente, em valor fixo, conforme enquadramento declarado e vencimento at√© o dia 10 de cada m√™s.
                        </label>
                    </div>

                    <div class="checkbox-item">
                        <input type="checkbox" id="check3" name="check3" required>
                        <label for="check3">
                            <strong>3.</strong> CONCORDO expressamente com o lan√ßamento mensal do ISSQN pela Administra√ß√£o Tribut√°ria Municipal nos valores fixados na tabela.
                        </label>
                    </div>

                    <div class="checkbox-item">
                        <input type="checkbox" id="check4" name="check4" required>
                        <label for="check4">
                            <strong>4.</strong> TENHO PLENO CONHECIMENTO de que, nos anos subsequentes, o lan√ßamento ser√° efetuado DE OF√çCIO pela Administra√ß√£o Tribut√°ria, sem necessidade de nova declara√ß√£o.
                        </label>
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO 4: CONFISS√ÉO DE D√çVIDA -->
            <div class="form-section">
                <h3>IV - CONFISS√ÉO DE D√çVIDA E CONCORD√ÇNCIA COM PROCEDIMENTOS DE COBRAN√áA</h3>

                <div class="alert alert-warning">
                    <strong>‚ö†Ô∏è IMPORTANTE:</strong> A presente declara√ß√£o constitui confiss√£o irrevog√°vel e irretrat√°vel de d√≠vida para todos os efeitos legais.
                </div>

                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="check5" name="check5" required>
                        <label for="check5">
                            <strong>5.</strong> RECONHE√áO que esta declara√ß√£o constitui CONFISS√ÉO IRREVOG√ÅVEL E IRRETRAT√ÅVEL DE D√çVIDA l√≠quida, certa e exig√≠vel, para fins de inscri√ß√£o em D√≠vida Ativa, Protesto Extrajudicial e Execu√ß√£o Fiscal.
                        </label>
                    </div>

                    <div class="checkbox-item">
                        <input type="checkbox" id="check6" name="check6" required>
                        <label for="check6">
                            <strong>6.</strong> RECONHE√áO que o n√£o pagamento acarretar√°: multa de mora, juros, corre√ß√£o monet√°ria, inscri√ß√£o em D√≠vida Ativa, protesto extrajudicial e execu√ß√£o fiscal.
                        </label>
                    </div>

                    <div class="checkbox-item">
                        <input type="checkbox" id="check7" name="check7" required>
                        <label for="check7">
                            <strong>7.</strong> CONCORDO expressamente com todos os procedimentos administrativos e judiciais de cobran√ßa, renunciando a alega√ß√µes de desconhecimento ou falta de notifica√ß√£o.
                        </label>
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO 5: RESPONSABILIDADE -->
            <div class="form-section">
                <h3>V - RESPONSABILIDADE PELA VERACIDADE DAS INFORMA√á√ïES</h3>

                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="check8" name="check8" required>
                        <label for="check8">
                            <strong>8.</strong> DECLARO, sob as penas da lei (especialmente arts. 299 e 304 do C√≥digo Penal), que todas as informa√ß√µes prestadas s√£o verdadeiras e correspondem fielmente √† realidade.
                        </label>
                    </div>

                    <div class="checkbox-item">
                        <input type="checkbox" id="check9" name="check9" required>
                        <label for="check9">
                            <strong>9.</strong> COMPROMETO-ME a comunicar √† SEMEC/SERM qualquer altera√ß√£o nos dados declarados no prazo de 30 dias.
                        </label>
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO 6: CI√äNCIA FINAL -->
            <div class="form-section">
                <h3>VI - CI√äNCIA E ACEITE FINAL</h3>

                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="check10" name="check10" required>
                        <label for="check10">
                            <strong>10.</strong> DECLARO ter recebido, lido e compreendido integralmente o teor desta Declara√ß√£o e os dispositivos legais aplic√°veis.
                        </label>
                    </div>

                    <div class="checkbox-item">
                        <input type="checkbox" id="check11" name="check11" required>
                        <label for="check11">
                            <strong>11.</strong> AUTORIZO a Administra√ß√£o Tribut√°ria Municipal a proceder aos lan√ßamentos mensais do ISSQN conforme estabelecido nesta declara√ß√£o.
                        </label>
                    </div>

                    <div class="checkbox-item">
                        <input type="checkbox" id="check12" name="check12" required>
                        <label for="check12">
                            <strong>12.</strong> ESTOU CIENTE de que esta declara√ß√£o produzir√° efeitos imediatos e permanecer√° v√°lida durante todo o per√≠odo de exerc√≠cio da atividade profissional.
                        </label>
                    </div>
                </div>
            </div>

            <!-- DATA -->
            <div class="form-section">
                <div class="form-group">
                    <label for="dataDeclaracao" class="required">Data da Declara√ß√£o</label>
                    <input type="date" id="dataDeclaracao" name="dataDeclaracao" required>
                </div>
            </div>

            <!-- BOT√ïES -->
            <div class="btn-container">
                <button type="button" class="btn btn-secondary" onclick="resetForm()">Limpar Formul√°rio</button>
                <button type="submit" class="btn btn-primary">Gerar PDF da Declara√ß√£o</button>
            </div>
        </form>
    </div>

    <!-- CONTE√öDO PARA PDF (OCULTO) -->
    <div id="pdfContent"></div>

    <script>
        /*
        ==========================================
        CONFIGURA√á√ÉO DO VALOR DA UPF
        ==========================================
        Para atualizar o valor da UPF anualmente,
        altere o valor abaixo na linha indicada:
        */
        const VALOR_UPF_ATUAL = '103,67'; // <-- ALTERAR AQUI ANUALMENTE
        
        // Definir o valor no campo ao carregar a p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('valorUPF').value = VALOR_UPF_ATUAL;
        });
        /*
        ==========================================
        */

        // M√°scaras para inputs
        document.getElementById('cpf').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/(\d{3})(\d)/, '$1.$2');
                value = value.replace(/(\d{3})(\d)/, '$1.$2');
                value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                e.target.value = value;
            }
        });

        document.getElementById('telefone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/^(\d{2})(\d)/g, '($1) $2');
                value = value.replace(/(\d)(\d{4})$/, '$1-$2');
                e.target.value = value;
            }
        });

        document.getElementById('cep').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 8) {
                value = value.replace(/^(\d{5})(\d)/, '$1-$2');
                e.target.value = value;
            }
        });

        // Fun√ß√£o para selecionar radio button
        function selectRadio(num) {
            document.getElementById('nivel' + num).checked = true;
            
            // Remove sele√ß√£o visual de todos
            document.querySelectorAll('.radio-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Adiciona sele√ß√£o visual ao clicado
            event.currentTarget.classList.add('selected');
        }

        // Set data atual como padr√£o
        document.getElementById('dataDeclaracao').valueAsDate = new Date();

        // Fun√ß√£o para resetar formul√°rio
        function resetForm() {
            if (confirm('Tem certeza que deseja limpar todos os campos do formul√°rio?')) {
                document.getElementById('declaracaoForm').reset();
                document.querySelectorAll('.radio-option').forEach(option => {
                    option.classList.remove('selected');
                });
                document.getElementById('dataDeclaracao').valueAsDate = new Date();
            }
        }

        // Fun√ß√£o para formatar data
        function formatarData(data) {
            const d = new Date(data + 'T00:00:00');
            const dia = String(d.getDate()).padStart(2, '0');
            const mes = String(d.getMonth() + 1).padStart(2, '0');
            const ano = d.getFullYear();
            return `${dia}/${mes}/${ano}`;
        }

        // Fun√ß√£o para formatar data por extenso
        function formatarDataExtenso(data) {
            const d = new Date(data + 'T00:00:00');
            const meses = ['janeiro', 'fevereiro', 'mar√ßo', 'abril', 'maio', 'junho', 
                          'julho', 'agosto', 'setembro', 'outubro', 'novembro', 'dezembro'];
            const dia = d.getDate();
            const mes = meses[d.getMonth()];
            const ano = d.getFullYear();
            return `${dia} de ${mes} de ${ano}`;
        }

        // Fun√ß√£o para obter texto do n√≠vel selecionado
        function getNivelTexto(nivel) {
            const niveis = {
                '1': {
                    item: '1',
                    descricao: 'N√≠vel fundamental ou nenhuma escolaridade',
                    aliquota: '1 UPF por profissional',
                    valor: '1 UPF'
                },
                '2': {
                    item: '2',
                    descricao: 'N√≠vel m√©dio',
                    aliquota: '1,5 UPF por profissional',
                    valor: '1,5 UPF'
                },
                '3': {
                    item: '3',
                    descricao: 'N√≠vel superior',
                    aliquota: '2 UPF por profissional',
                    valor: '2 UPF'
                }
            };
            return niveis[nivel];
        }

        // Fun√ß√£o para calcular valor mensal
        function calcularValorMensal(nivel, valorUPF) {
            const multiplicadores = {
                '1': 1,
                '2': 1.5,
                '3': 2
            };
            const valor = parseFloat(valorUPF.replace(',', '.')) * multiplicadores[nivel];
            return valor.toFixed(2).replace('.', ',');
        }

        // Submit do formul√°rio
        document.getElementById('declaracaoForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Salvar refer√™ncia ao bot√£o submit
            const submitButton = e.submitter || document.querySelector('button[type="submit"]');

            // Validar todos os checkboxes
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            let todosCheckados = true;
            
            checkboxes.forEach(checkbox => {
                if (!checkbox.checked) {
                    todosCheckados = false;
                }
            });

            if (!todosCheckados) {
                alert('Por favor, marque todas as declara√ß√µes de ci√™ncia e concord√¢ncia antes de gerar o PDF.');
                return;
            }

            // Validar n√≠vel selecionado
            const nivelSelecionado = document.querySelector('input[name="nivel"]:checked');
            if (!nivelSelecionado) {
                alert('Por favor, selecione o n√≠vel de escolaridade.');
                return;
            }

            // Coletar dados do formul√°rio
            const dados = {
                nome: document.getElementById('nome').value,
                cpf: document.getElementById('cpf').value,
                rg: document.getElementById('rg').value,
                dataNascimento: formatarData(document.getElementById('dataNascimento').value),
                telefone: document.getElementById('telefone').value,
                email: document.getElementById('email').value,
                endereco: document.getElementById('endereco').value,
                bairro: document.getElementById('bairro').value,
                cep: document.getElementById('cep').value,
                profissao: document.getElementById('profissao').value,
                localPrestacao: document.getElementById('localPrestacao').value,
                nivel: nivelSelecionado.value,
                valorUPF: document.getElementById('valorUPF').value,
                dataDeclaracao: document.getElementById('dataDeclaracao').value
            };

            const nivelInfo = getNivelTexto(dados.nivel);
            const valorMensal = calcularValorMensal(dados.nivel, dados.valorUPF);

            // Gerar HTML do PDF
            const pdfHTML = `
                <div class="pdf-document">
                    <h1>DECLARA√á√ÉO PARA LAN√áAMENTO DE ISSQN DE PROFISSIONAL AUT√îNOMO</h1>
                    <hr>
                    <h2>DECLARA√á√ÉO DE ENQUADRAMENTO E CONCORD√ÇNCIA PARA LAN√áAMENTO MENSAL DO<br>
                    IMPOSTO SOBRE SERVI√áOS DE QUALQUER NATUREZA ‚Äì ISSQN</h2>
                    <p style="text-align: center;"><strong>Profissional Aut√¥nomo - Art. 274, II da Lei Complementar Municipal n¬∫ 878/2021</strong></p>
                    <hr>

                    <h3>IDENTIFICA√á√ÉO DO DECLARANTE</h3>
                    <div class="field-line"><strong>Nome Completo:</strong> ${dados.nome}</div>
                    <div class="field-line"><strong>CPF:</strong> ${dados.cpf} &nbsp;&nbsp;&nbsp; <strong>RG:</strong> ${dados.rg}</div>
                    <div class="field-line"><strong>Data de Nascimento:</strong> ${dados.dataNascimento} &nbsp;&nbsp;&nbsp; <strong>Telefone:</strong> ${dados.telefone}</div>
                    <div class="field-line"><strong>E-mail:</strong> ${dados.email}</div>
                    <div class="field-line"><strong>Endere√ßo Completo:</strong> ${dados.endereco}</div>
                    <div class="field-line"><strong>CEP:</strong> ${dados.cep} &nbsp;&nbsp;&nbsp; <strong>Bairro:</strong> ${dados.bairro} &nbsp;&nbsp;&nbsp; <strong>Cidade/UF:</strong> Porto Velho/RO</div>
                    <div class="field-line"><strong>Profiss√£o/Atividade Exercida:</strong> ${dados.profissao}</div>
                    <div class="field-line"><strong>Local de Presta√ß√£o dos Servi√ßos:</strong> ${dados.localPrestacao}</div>

                    <h3>I - DECLARA√á√ÉO DE EXERC√çCIO DE ATIVIDADE AUT√îNOMA</h3>
                    <p>Declaro, para os devidos fins de direito e sob as penas da lei, que exer√ßo atividade profissional aut√¥noma, de forma habitual e permanente, prestando servi√ßos de natureza <strong>${dados.profissao}</strong> no Munic√≠pio de Porto Velho/RO, nos termos do art. 1¬∫ e seguintes da Lei Complementar Municipal n¬∫ 878/2021 (C√≥digo Tribut√°rio Municipal).</p>

                    <h3>II - ENQUADRAMENTO NA TABELA DE APURA√á√ÉO DO ISSQN</h3>
                    <p>Declaro que me enquadro na seguinte categoria, conforme Tabela B - Tabela de Apura√ß√£o do Valor do ISSQN dos Profissionais Aut√¥nomos, constante do Anexo I da LC 878/2021:</p>
                    
                    <div class="checkbox-line"><strong>[${dados.nivel === '1' ? 'X' : ' '}] Item 1</strong> - N√≠vel fundamental ou nenhuma escolaridade - <strong>Al√≠quota: 1 UPF mensal - Imposto: 1 UPF</strong></div>
                    <div class="checkbox-line"><strong>[${dados.nivel === '2' ? 'X' : ' '}] Item 2</strong> - N√≠vel m√©dio - <strong>Al√≠quota: 1,5 UPF mensal - Imposto: 1,5 UPF</strong></div>
                    <div class="checkbox-line"><strong>[${dados.nivel === '3' ? 'X' : ' '}] Item 3</strong> - N√≠vel superior - <strong>Al√≠quota: 2 UPF mensal - Imposto: 2 UPF</strong></div>

                    <p><strong>Valor mensal devido:</strong> ${nivelInfo.valor}, correspondente a R$ ${valorMensal} (valor calculado com base na UPF vigente na data desta declara√ß√£o - R$ ${dados.valorUPF}).</p>

                    <h3>III - RECONHECIMENTO DA OBRIGA√á√ÉO TRIBUT√ÅRIA</h3>
                    <p><strong>1.</strong> RECONHE√áO que, em raz√£o do exerc√≠cio de atividade profissional aut√¥noma no Munic√≠pio de Porto Velho/RO, sou contribuinte do Imposto Sobre Servi√ßos de Qualquer Natureza - ISSQN, nos termos dos artigos 9¬∫, 10 e 156, III, da Constitui√ß√£o Federal, artigos 153 e seguintes do C√≥digo Tribut√°rio Nacional (Lei n¬∫ 5.172/66) e artigos 272 a 275 da Lei Complementar Municipal n¬∫ 878/2021.</p>

                    <p><strong>2.</strong> DECLARO ter plena ci√™ncia de que o ISSQN incidente sobre minhas atividades profissionais ser√° lan√ßado mensalmente, em valor fixo, conforme enquadramento declarado acima e apurado com base na Tabela B do Anexo I da LC 878/2021.</p>

                    <p><strong>3.</strong> CONCORDO expressamente com o lan√ßamento mensal do ISSQN pela Administra√ß√£o Tribut√°ria Municipal, nos valores fixados na tabela acima identificada, com vencimento at√© o dia 10 (dez) de cada m√™s, conforme determina o Regulamento do C√≥digo Tribut√°rio Municipal (Decreto n¬∫ 18.749/2023).</p>

                    <p><strong>4.</strong> TENHO PLENO CONHECIMENTO de que, ap√≥s este primeiro lan√ßamento por declara√ß√£o, nos anos subsequentes o lan√ßamento do ISSQN ser√° efetuado de of√≠cio pela Administra√ß√£o Tribut√°ria, sem necessidade de nova declara√ß√£o, mantendo-se os mesmos crit√©rios de enquadramento, salvo se houver altera√ß√£o no n√≠vel de escolaridade ou na atividade exercida, hip√≥tese em que devo comunicar imediatamente a SEMEC/SERM.</p>

                    <h3>IV - CONFISS√ÉO DE D√çVIDA E CONCORD√ÇNCIA COM PROCEDIMENTOS DE COBRAN√áA</h3>
                    <p><strong>5.</strong> Esta declara√ß√£o constitui CONFISS√ÉO IRREVOG√ÅVEL E IRRETRAT√ÅVEL DE D√çVIDA l√≠quida, certa e exig√≠vel, para todos os efeitos legais, especialmente para fins de inscri√ß√£o em D√≠vida Ativa, Protesto Extrajudicial e Execu√ß√£o Fiscal, nos termos dos artigos 201 a 204 do C√≥digo Tribut√°rio Nacional e da Lei Federal n¬∫ 6.830/80 (Lei de Execu√ß√µes Fiscais).</p>

                    <p><strong>6.</strong> RECONHE√áO que o n√£o pagamento do ISSQN nos prazos estabelecidos acarretar√°: <strong>a)</strong> Incid√™ncia de multa de mora, juros e corre√ß√£o monet√°ria, nos termos do art. 178 da LC 878/2021; <strong>b)</strong> Inscri√ß√£o do d√©bito em D√≠vida Ativa Municipal, com a consequente expedi√ß√£o de Certid√£o de D√≠vida Ativa (CDA), que constitui t√≠tulo executivo extrajudicial; <strong>c)</strong> Encaminhamento do d√©bito para Protesto Extrajudicial, conforme Lei Federal n¬∫ 12.767/2012; <strong>d)</strong> Ajuizamento de Execu√ß√£o Fiscal para cobran√ßa judicial do cr√©dito tribut√°rio.</p>

                    <p><strong>7.</strong> CONCORDO expressamente com todos os procedimentos administrativos e judiciais de cobran√ßa acima elencados, renunciando desde j√° a qualquer alega√ß√£o de desconhecimento ou falta de notifica√ß√£o pr√©via, tendo em vista que esta declara√ß√£o constitui ci√™ncia inequ√≠voca da obriga√ß√£o tribut√°ria e de suas consequ√™ncias.</p>

                    <h3>V - RESPONSABILIDADE PELA VERACIDADE DAS INFORMA√á√ïES</h3>
                    <p><strong>8.</strong> DECLARO, sob as penas da lei, especialmente aquelas previstas nos artigos 299 e 304 do C√≥digo Penal Brasileiro (falsidade ideol√≥gica e uso de documento falso) e no art. 312 da LC 878/2021 (crime contra a ordem tribut√°ria municipal), que todas as informa√ß√µes prestadas nesta declara√ß√£o s√£o verdadeiras e correspondem fielmente √† realidade dos fatos.</p>

                    <p><strong>9.</strong> COMPROMETO-ME a comunicar √† Secretaria Municipal de Economia - SEMEC, por meio da Secretaria Executiva da Receita Municipal - SERM, qualquer altera√ß√£o nos dados declarados, especialmente mudan√ßa de endere√ßo, encerramento da atividade ou altera√ß√£o no n√≠vel de escolaridade, no prazo de 30 (trinta) dias contados da ocorr√™ncia do fato.</p>

                    <h3>VI - CI√äNCIA E ACEITE FINAL</h3>
                    <p><strong>10.</strong> DECLARO ter recebido, lido e compreendido integralmente o teor desta Declara√ß√£o, bem como os dispositivos legais que regulamentam a tributa√ß√£o de profissionais aut√¥nomos pelo ISSQN no Munic√≠pio de Porto Velho/RO.</p>

                    <p><strong>11.</strong> AUTORIZO a Administra√ß√£o Tribut√°ria Municipal a proceder aos lan√ßamentos mensais do ISSQN, conforme os valores e crit√©rios estabelecidos nesta declara√ß√£o e na legisla√ß√£o vigente.</p>

                    <p><strong>12.</strong> ESTOU CIENTE de que esta declara√ß√£o produzir√° efeitos a partir de ${formatarData(dados.dataDeclaracao)} e permanecer√° v√°lida enquanto perdurar o exerc√≠cio da atividade profissional aut√¥noma no Munic√≠pio de Porto Velho/RO.</p>

                    <h3>ANEXO - TABELA B (Reprodu√ß√£o para ci√™ncia do declarante)</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th>Profissionais aut√¥nomos por n√≠vel de escolaridade</th>
                                <th>Al√≠quota "Ad Rem"</th>
                                <th>Periodicidade</th>
                                <th>Valor do Imposto</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>N√≠vel fundamental ou nenhuma escolaridade</td>
                                <td>1 UPF por profissional</td>
                                <td>Mensal</td>
                                <td>1 UPF</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>N√≠vel m√©dio</td>
                                <td>1,5 UPF por profissional</td>
                                <td>Mensal</td>
                                <td>1,5 UPF</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>N√≠vel superior</td>
                                <td>2 UPF por profissional</td>
                                <td>Mensal</td>
                                <td>2 UPF</td>
                            </tr>
                        </tbody>
                    </table>
                    <p style="font-size: 9pt; margin-top: 5px;"><em>* UPF - Unidade Padr√£o Fiscal do Munic√≠pio de Porto Velho, nos termos do art. 289 da LC 878/2021.</em></p>

                    <hr>
                    <p style="text-align: center; margin-top: 20px;">Porto Velho/RO, ${formatarDataExtenso(dados.dataDeclaracao)}.</p>

                    <div class="signature-area">
                        <div class="signature-line"></div>
                        <strong>${dados.nome}</strong><br>
                        CPF: ${dados.cpf}
                    </div>

                    <hr style="margin-top: 40px;">
                    <p style="font-size: 9pt;"><strong>BASE LEGAL:</strong></p>
                    <p style="font-size: 9pt;">Constitui√ß√£o Federal de 1988, art. 156, III ‚Ä¢ Lei n¬∫ 5.172/66 (C√≥digo Tribut√°rio Nacional), arts. 142, 145, 149, 150, 201 a 204 ‚Ä¢ Lei Complementar n¬∫ 116/2003 ‚Ä¢ Lei Complementar Municipal n¬∫ 878/2021, arts. 1¬∫, 9¬∫, 10, 178, 272 a 275, 289, 312 ‚Ä¢ Decreto Municipal n¬∫ 18.749/2023 (Regulamento do CTM) ‚Ä¢ Lei Federal n¬∫ 6.830/80 (Execu√ß√µes Fiscais) ‚Ä¢ Lei Federal n¬∫ 12.767/2012 (Protesto de CDAs)</p>
                </div>
            `;

            // Inserir HTML no container oculto
            document.getElementById('pdfContent').innerHTML = pdfHTML;

            // Aguardar um momento para o DOM renderizar
            setTimeout(() => {
                // Configura√ß√µes do PDF
                const element = document.getElementById('pdfContent');
                
                // Verificar se o elemento tem conte√∫do
                if (!element || element.innerHTML.trim() === '') {
                    alert('Erro: Conte√∫do do PDF n√£o foi gerado corretamente.');
                    return;
                }

                const opt = {
                    margin: [10, 10, 10, 10],
                    filename: `Declaracao_ISSQN_${dados.cpf.replace(/\D/g, '')}_${dados.dataDeclaracao}.pdf`,
                    image: { type: 'jpeg', quality: 0.98 },
                    html2canvas: { 
                        scale: 2, 
                        useCORS: true,
                        logging: false,
                        letterRendering: true,
                        allowTaint: false
                    },
                    jsPDF: { 
                        unit: 'mm', 
                        format: 'a4', 
                        orientation: 'portrait',
                        compress: true
                    },
                    pagebreak: { 
                        mode: ['avoid-all', 'css', 'legacy'],
                        before: '.page-break'
                    }
                };

                // Mostrar mensagem de processamento
                const originalText = submitButton.textContent;
                submitButton.textContent = 'Gerando PDF...';
                submitButton.disabled = true;

                // Gerar PDF
                html2pdf()
                    .set(opt)
                    .from(element)
                    .save()
                    .then(() => {
                        submitButton.textContent = originalText;
                        submitButton.disabled = false;
                        alert('PDF gerado com sucesso! O download foi iniciado automaticamente.');
                        // Limpar o conte√∫do ap√≥s gerar
                        document.getElementById('pdfContent').innerHTML = '';
                    })
                    .catch(err => {
                        submitButton.textContent = originalText;
                        submitButton.disabled = false;
                        console.error('Erro ao gerar PDF:', err);
                        alert('Erro ao gerar o PDF. Por favor, tente novamente.\n\nDetalhes: ' + err.message);
                    });
            }, 500); // Delay de 500ms para garantir renderiza√ß√£o
        });
    </script>
</body>
</html>
